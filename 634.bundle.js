"use strict";(self.webpackChunkfrontend_performance_basecamp=self.webpackChunkfrontend_performance_basecamp||[]).push([[634],{634:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var s=n(848),i=n(540);class a extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}const r=e=>{return t=void 0,n=void 0,i=function*(){const t=yield fetch(e.toString());if(!t.ok)throw new a(t.status,`HTTP error! status: ${t.status}`);return t.json()},new((s=void 0)||(s=Promise))((function(e,a){function r(e){try{o(i.next(e))}catch(e){a(e)}}function c(e){try{o(i.throw(e))}catch(e){a(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(r,c)}o((i=i.apply(t,n||[])).next())}));var t,n,s,i},c=(e,t)=>{const n=new URL(e.toString());return Object.entries(t).forEach((([e,t])=>{n.searchParams.append(e,t)})),n};var o=function(e,t,n,s){return new(n||(n=Promise))((function(i,a){function r(e){try{o(s.next(e))}catch(e){a(e)}}function c(e){try{o(s.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,c)}o((s=s.apply(e,t||[])).next())}))};const l="giphy-cache";var d=function(e,t,n,s){return new(n||(n=Promise))((function(i,a){function r(e){try{o(s.next(e))}catch(e){a(e)}}function c(e){try{o(s.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,c)}o((s=s.apply(e,t||[])).next())}))};const h="8gK7uj7MbSCX9FcVtgUf7wDlotfWbQdH",u="https://api.giphy.com/v1/gifs",m=e=>d(void 0,void 0,void 0,(function*(){try{return(yield r(e)).data.map((({id:e,title:t,images:n})=>({id:e,title:null!=t?t:"",imageUrl:n.original.url})))}catch(e){throw e instanceof a?console.error(`API Error: ${e.status} - ${e.message}`):console.error("Unexpected error:",e),e}})),g=()=>d(void 0,void 0,void 0,(function*(){const e=`${u}/trending?api_key=${h}&limit=16&rating=g`,t=c(new URL(`${u}/trending`),{api_key:h,limit:"16",rating:"g"});return n=e,s=()=>m(t),o(void 0,void 0,void 0,(function*(){const e=yield(e=>o(void 0,void 0,void 0,(function*(){const t=yield caches.open(l),n=yield t.match(e);if(!n)return null;const s=yield n.json(),{timestamp:i,cachedData:a}=s;return Date.now()-i<9e5?a:(yield t.delete(e),null)})))(n);if(e)return e;const t=yield s();return yield((e,t)=>o(void 0,void 0,void 0,(function*(){const n=yield caches.open(l),s={timestamp:Date.now(),cachedData:t},i=new Response(JSON.stringify(s));yield n.put(e,i)})))(n,t),t}));var n,s})),p=(e,t)=>d(void 0,void 0,void 0,(function*(){const n=c(new URL(`${u}/search`),{api_key:h,q:e,limit:"16",offset:""+16*t,rating:"g",lang:"en"});return m(n)}));var f=function(e,t,n,s){return new(n||(n=Promise))((function(i,a){function r(e){try{o(s.next(e))}catch(e){a(e)}}function c(e){try{o(s.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,c)}o((s=s.apply(e,t||[])).next())}))};const y="BEFORE_SEARCH",j="FOUND",x="NO_RESULT",v="ERROR";var b=n(393);const w=({searchKeyword:e,onEnter:t,onChange:n,onSearch:i})=>(0,s.jsxs)("section",Object.assign({className:"_yRyLCVW_8BrXNu2Ae1I"},{children:[(0,s.jsx)("h3",Object.assign({className:"tmllUNaCFiCyJ_2LTNUL"},{children:"- find the best gif now -"})),(0,s.jsxs)("div",Object.assign({className:"p1yl5o1LGzbcgKpLvnzP"},{children:[(0,s.jsx)("input",{className:"XZuzNzJP7hkmuiygaxt6",type:"text",value:e,onKeyUp:t,onChange:n}),(0,s.jsx)("button",Object.assign({className:"_HPJ5AEs_c3uawxix3Uk",type:"button",onClick:i},{children:(0,s.jsx)(b.fUO,{color:"white",size:"2rem"})}))]}))]})),N="bMX5kwo8awW0wG6uP_MM",O=({status:e})=>{switch(e){case x:return(0,s.jsxs)("h3",Object.assign({className:N},{children:[(0,s.jsx)("span",{children:"Nothing"}),"ðŸ¥²"]}));case y:return(0,s.jsxs)("h3",Object.assign({className:N},{children:["ðŸ”¥ ",(0,s.jsx)("span",{children:"Trending Now"})," ðŸ”¥"]}));case v:return(0,s.jsxs)("h3",Object.assign({className:N},{children:[(0,s.jsx)("span",{children:"Something Went Wrong"}),"ðŸ¥²"]}));default:return(0,s.jsx)("h3",Object.assign({className:N},{children:(0,s.jsx)("span",{children:"We Found..."})}))}},U=i.memo((({imageUrl:e="",title:t=""})=>(0,s.jsxs)("div",Object.assign({className:"d9Kx4D_C6coYB4Bq3Y_D"},{children:[(0,s.jsx)("img",{className:"_qDfMSZFh0Sj5QB2_372",src:e}),(0,s.jsxs)("div",Object.assign({className:"jmVam4uDiwDe9X0kov9s"},{children:[(0,s.jsx)("div",{className:"bESWa5xgNgk178EbWGcc"}),(0,s.jsx)("h4",Object.assign({className:"x8ChTAzHTz86NM8umGRm"},{children:t}))]}))]})))),S=({status:e,gifList:t,loadMore:n})=>{const i=()=>(0,s.jsx)("div",Object.assign({className:"Sk1D0Qs59YRDsSi_PLe_"},{children:t.map((e=>(0,s.jsx)(U,{imageUrl:e.imageUrl,title:e.title},e.id)))}));return(0,s.jsxs)("section",Object.assign({className:"de2qwsei5MNiz7eV4rNm"},{children:[(0,s.jsx)(O,{status:e}),(()=>{switch(e){case j:return(0,s.jsxs)(s.Fragment,{children:[i(),(0,s.jsx)("button",Object.assign({className:"qrKiKyOk1oFYBTmViAam",onClick:n},{children:"load more"}))]});case y:return i();default:return(0,s.jsx)(s.Fragment,{})}})()]}))};var k=n(726),_=n.n(k);const P=({artist:e})=>{const{name:t,profileUrl:n,profileImageUrl:i}=e;return(0,s.jsxs)("li",Object.assign({className:"WS5RuQ_x18SikZHTRyke"},{children:[(0,s.jsx)("img",{className:"XNLKxvyVOVu8lOJJSdAt",src:i}),(0,s.jsx)("p",{children:(0,s.jsx)("a",Object.assign({className:"mdtZcvbaOpN76XOUKbzG",href:n},{children:t}))})]}))},C=({artists:e})=>(0,s.jsx)("ul",{children:e.map(((e,t)=>(0,s.jsx)(P,{artist:e},t)))}),L=[{name:"Pola Lucas",profileUrl:"https://giphy.com/polalucas",profileImageUrl:"https://media4.giphy.com/media/gwWAA4PYJLTtyOHkUD/giphy.gif"},{name:"Yizr",profileUrl:"https://giphy.com/yizr",profileImageUrl:"https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExbjE3YWc2Ym02aWxrMDVweDRkNHRiZjdtejhxZTNuNGxlYWZqOWx4YyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/UJnRqJWD0KrbW/giphy.webp"},{name:"YUNGSUNG",profileUrl:"https://giphy.com/yungsung",profileImageUrl:"https://media0.giphy.com/media/lgnOH6bhb1QpUm2k6w/giphy.gif"},{name:"Kev Lavery",profileUrl:"https://giphy.com/kevlavery",profileImageUrl:"https://media1.giphy.com/media/ZPLluhRJiGwSttn7i2/giphy.gif"},{name:"Lorna Mills",profileUrl:"https://giphy.com/lornamills",profileImageUrl:"https://media1.giphy.com/media/l0Iyn1gGtCPa3x41a/200.gif"}],I=Array.from({length:100},((e,t)=>L[t%L.length])),R=()=>I,E={floatingButton:"jQBPp9XzUlR0s47cyMvy",selectedItemContainer:"bI_mJt1zrVbU9rgQ8O9a",showSheet:"_xMBJVElyMLYg2be4I3S",sheetTitleContainer:"p259JqbBpFGYE_NkFPXj",sheetContentsContainer:"_4uL_W0scH3KiWMUSa8z"},W=_().bind(E),D=()=>{const e=R(),[t,n]=(0,i.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",Object.assign({type:"button",className:E.floatingButton,onClick:()=>n(!0)},{children:(0,s.jsx)(b.RJf,{color:"white",size:"24px"})})),(0,s.jsxs)("section",Object.assign({className:W("selectedItemContainer",{showSheet:t})},{children:[(0,s.jsxs)("div",Object.assign({className:E.sheetTitleContainer},{children:[(0,s.jsx)("h4",{children:"What's all this? "}),(0,s.jsx)("button",Object.assign({type:"button",onClick:()=>n(!1)},{children:(0,s.jsx)(b.zhF,{size:"24px"})}))]})),(0,s.jsxs)("div",Object.assign({className:E.sheetContentsContainer},{children:[(0,s.jsx)("img",{src:"https://media0.giphy.com/media/3oKIPdiPGxPI7Dze7u/giphy.gif?cid=ecf05e475f5bct6ci09g3pgn43nf6bausx33fj7f96f6ig92&rid=giphy.gif&ct=g"}),(0,s.jsx)("p",{children:"'memegle' is powered by GIPHY, the top source for the best & newest GIFs & Animated Stickers online. You can find any gif uploaded on GIPHY here."}),(0,s.jsx)("br",{}),(0,s.jsx)("img",{src:"https://giphy.com/static/img/artistdirectory_1040.gif"}),(0,s.jsxs)("p",{children:["If you want more, you are always welcome to contribute as an artist. Please refer to the guidelineÂ ",(0,s.jsx)("a",Object.assign({href:"https://support.giphy.com/hc/en-us/articles/360019977552-How-to-Upload"},{children:"here"})),"Â and upload your work!"]}),(0,s.jsx)("br",{}),(0,s.jsx)("p",{children:"Here are some artists you can refer to."}),(0,s.jsx)("br",{}),(0,s.jsx)("section",{children:(0,s.jsx)(C,{artists:e})})]}))]}))]})},K=()=>{const{status:e,searchKeyword:t,gifList:n,searchByKeyword:a,updateSearchKeyword:r,loadMore:c}=(()=>{const[e,t]=(0,i.useState)(y),[n,s]=(0,i.useState)(0),[a,r]=(0,i.useState)([]),[c,o]=(0,i.useState)(""),[l,d]=(0,i.useState)(null),h=e=>{t(v),d(e instanceof Error?e.message:"An unknown error occurred")};return(0,i.useEffect)((()=>{f(void 0,void 0,void 0,(function*(){if(e===y)try{const e=yield g();r(e)}catch(e){h(e)}}))}),[]),{status:e,searchKeyword:c,gifList:a,errorMessage:l,searchByKeyword:()=>f(void 0,void 0,void 0,(function*(){t("LOADING"),s(0),r([]),d(null);try{const e=yield p(c,0);if(0===e.length)return void t(x);r(e),t(j)}catch(e){h(e)}})),updateSearchKeyword:e=>{o(e.target.value)},loadMore:()=>f(void 0,void 0,void 0,(function*(){const e=n+1;try{const t=yield p(c,e);r((e=>[...e,...t])),s(e)}catch(e){h(e)}}))}})();return(0,s.jsxs)("div",Object.assign({className:"OXPtcxG6dhJUUZLVn9IN"},{children:[(0,s.jsx)(w,{searchKeyword:t,onEnter:e=>{"Enter"===e.key&&a()},onChange:r,onSearch:a}),(0,s.jsx)(S,{status:e,gifList:n,loadMore:c}),(0,s.jsx)(D,{})]}))}}}]);
//# sourceMappingURL=634.bundle.js.map